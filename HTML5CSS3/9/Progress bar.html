<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
*{margin:0; padding:0;}
body{background:#000; text-align:center;}
canvas{background:#fff;}
</style>
<script>
	function d2a(n){
		return n*Math.PI/180;
	}
	window.onload = function(){
		var oC = document.getElementById('can');
		var gd = oC.getContext('2d');
		
		var cx = oC.width/2,
			cy = oC.height/2,
			r = 100;
			
		var lg = gd.createLinearGradient(300,200,600,600);
		lg.addColorStop(0,'#F9C');
		lg.addColorStop(0.5,'#C9F');
		lg.addColorStop(1,'#F66');
		
		var d = 0;
		var timer = setInterval(function(){
			d++;
	
			gd.clearRect(0,0,oC.width,oC.height);
	
			var str = (d/360*100).toFixed(2)+'%';
			gd.font = '30px 微软雅黑';
			gd.textAlign = 'center';
			gd.textBaseline = 'middle';
			gd.fillStyle = lg;
			gd.fillText(str,cx,cy);
			
			drawArc(0,d,lg);

			if(d == 360){
				clearInterval(timer);
			}
		},16);	

		function drawArc(s,e,c){
			c = c||'black';
			gd.beginPath();
			gd.arc(cx,cy,r,d2a(s),d2a(e),false);
			gd.lineWidth = 20;
			gd.strokeStyle = c;
			gd.stroke();
		}
	};
</script>
</head>

<body>
<canvas id="can" width="800" height="600">
	<p>浏览器版本过低</p>
</canvas>
</body>
</html>
